<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Prediction Site</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div class="container">
        <div class="input-section">
            <label for="region">Choose region</label>
            <input type="text" id="region" name="region">

            <label for="day">Choose day</label>
            <input type="number" id="day" name="day" min="1" max="31">

            <label for="month">Choose month</label>
            <input type="number" id="month" name="month" min="1" max="12">

            <label for="year">Choose year</label>
            <input type="number" id="year" name="year" min="2011" max="2020">

            <label for="days">Consumption rate</label>
            <select id="days" name="days">
                <option value="1">Day 1</option>
                <option value="2">Day 2</option>
                <option value="3">Day 3</option>
                <option value="4">Day 4</option>
                <option value="5">Day 5</option>
            </select>

            <button id="predict-btn">PREDICT</button>
        </div>
        <div class="graph-section">
            <h2>Consumption graph</h2>
            <div id="graph"></div>
        </div>
    </div>
    <script>
        document.getElementById('predict-btn').addEventListener('click', function() {
            const region = document.getElementById('region').value;
            const day = document.getElementById('day').value;
            const month = document.getElementById('month').value;
            const year = document.getElementById('year').value;
            const consumptionRate = document.getElementById('days').value;

            fetch('/predict', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                },
                body: JSON.stringify({
                    region: region,
                    day: day,
                    month: month,
                    year: year,
                    consumption_rate: consumptionRate,
                }),
            })
            .then(response => response.json())
            .then(data => {
                if (data.error) {
                    alert(data.error);
                } else {
                    const graph = document.getElementById('graph');
                    graph.innerHTML = `<img src="${data.plot_url}" alt="Consumption Graph">`;
                }
            })
            .catch((error) => {
                console.error('Error:', error);
            });
        });
    </script>
</body>
</html>
